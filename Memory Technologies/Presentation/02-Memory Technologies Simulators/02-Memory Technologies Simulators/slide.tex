%%% Uppsala University presentation beamer template v2.0
%%% provided by Diletta Goglia, IT Department, Uppsala University
%%% email: diletta.goglia@it.uu.se
%%% December, 2023

% This template is the updated version of the "Uppsala University presentation template v1.0" created by Mats Jonsson (mats@mekeriet.se) in March 2021.


\documentclass{beamer}

\usepackage[english]{babel}
\usepackage[utf8x]{inputenc}
\usepackage{hyperref, % clickable links
    graphicx, % include images
    listings, % for code and formatting
    caption, % customization of captions in figures and tables
    stackengine, % custom layouts 
    amsmath, % math env
    xcolor, % extend color support
    multicol, % multiple columns layout
    booktabs, % high quality tables
    lipsum % remove it
}

\usepackage{UU_beamer} % customized style

\def\cmd#1{\texttt{\color{red}\footnotesize $\backslash$#1}}
\def\env#1{\texttt{\color{blue}\footnotesize #1}}

% ------ CODE COLOR DEFINITION ------ %

\definecolor{codered}{rgb}{0.6,0,0}
\definecolor{codeblue}{rgb}{0,0,0.8}
\definecolor{codegreen}{rgb}{0,0.5,0}
\definecolor{almostwhite}{gray}{0.55}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstset{
    basicstyle=\ttfamily\small,
    keywordstyle=\bfseries\color{codeblue},
    emphstyle=\ttfamily\color{codered},   % Custom highlighting style
    stringstyle=\color{codepurple},
    numbers=left,
    numberstyle=\small\color{almostwhite},
    rulesepcolor=\color{red!20!green!20!blue!20},
    frame=shadowbox,
    commentstyle=\color{codegreen},
    captionpos=b    
}

% ------------- PRESENTATION INFO --------------- %
\newcommand{\fullconference}{Memory Technologies - Spring 2024}
\newcommand{\shortconference}{MT - Spring 2024}
\newcommand{\contact}{\textit{\href{mailto:adinepour@aut.ac.ir}{adinepour@aut.ac.ir}}}

\author[RA, \contact]{\href{}{Reza Adinepour}}
\institute[CE Department, AUT]{\href{}{Computer Engineering Department, Tehran Ploytechnic}
    \\ \smallskip \contact}
\title[Exploring Memory Technology Simulators]{Exploring Memory Technology Simulators}
\subtitle[\shortconference]{}
\date[Month 20XX]{\small \today
    \\ \fullconference}


\begin{document}

% ------------ TITLE SLIDE --------------- %
{
% Remove headline and footline from first slide
\setbeamertemplate{footline}{} 
\setbeamertemplate{headline}{} 

\begin{frame}\label{start}
    \titlepage
    \begin{figure}
            \includegraphics[scale=0.13]{style/uu_logo} 
    \end{figure}
\end{frame}
}

% ---------- TABLE OF CONTENT --------- %
\begin{frame}{Agenda}
    \tableofcontents[sectionstyle=show, subsectionstyle=show/shaded/hide, subsubsectionstyle=show/shaded/hide]
\end{frame}


\section{Introduction}

\begin{frame}{Introduction}
	
	\textbf{Why we should use simulators?}
	
	\begin{enumerate}
		\item Simulators are vital for understanding computer architecture
		\item Two main categories: 
		\begin{enumerate}
			\item Memory simulators\\ => focus solely on memory components
			\item Full-system simulators \\ => emulate all computer components
		\end{enumerate}
		\item Efficient design relies on effective simulation tools
		\item Comprehensive insights through full-system simulation
		\item Maximize performance with accurate simulators
	\end{enumerate}
	
	
%	\begin{block}{Block Title}
%		Block 1
%	\end{block}
%	
%	\centering
%	\begin{equation}
%		x = \frac{{-a \pm \sqrt{{b}}}}{{c}}
%		\label{eq:equation1}
%	\end{equation}
%	
%	In Equation~\ref{eq:equation1}, we have the \textit{bla bla bla} formula.
	
\end{frame}



\subsection{Full-system simulators}

\begin{frame}{Full-system simulators}
	
	Full-system simulators emulate the entire computer system, providing a holistic view. For example, we can refer to the following simulators:
	\begin{enumerate}
		\item GEM5
		\item QEMU
		\item Bochs
		\item SimpleScalar
	\end{enumerate}
	
	It's worth noting that a notable and highly regarded emulator in this field is \textbf{GEM5}.
	
\end{frame}





\subsection{Memory simulators}
\begin{frame}{Memory simulators	}
	
	Memory simulators focus on simulating specific memory components. Examples include:
	\begin{enumerate}
		\item \textbf{CACTI}
		\item \textbf{NVSIM}
		\item \textbf{DRAMSim}
		\item DiskSim
		\item Ramulator
		\item OpenRAM
		\item HSPICE
	\end{enumerate}
	
	In this talk, we will review the first 3 cases and \textbf{SimpleScalar} in the category of Full-system simulators.
	
\end{frame}









\section{CACTI}
\begin{frame}{CACTI}
	
	"In 1993, Dr. Jupi and Dr. Wilton pioneered the first simulation, and CACTI was subsequently developed through HP company tests."
	
	\begin{enumerate}
		\item Although this simulator simulates all memory levels, its main use is in the analysis of \textbf{Caches}
		
		\item This simulator takes a set of memory parameters as input
		\item It calculates various parameters such as \textbf{Access time}, \textbf{Power}, \textbf{Cycle time}, and \textbf{Area}
		\item CACTI is available in two varieties: Web version and C++ Source code
	\end{enumerate}
	
	Next, we will explain how to install and work with the uncompiled version of this emulator

    % --------- TWO COLUMNS LAYOUT ------- %
%    \begin{columns}
%
%        \column{0.5\textwidth}
%        \begin{itemize}
%            \item Item 1
%            \item Item 2 
%            \begin{itemize}
%                \item Subitem 
%            \end{itemize}
%        \end{itemize}
%        
%        \column{0.5\textwidth}
%        \begin{figure}
%            \centering
%            \includegraphics[height=0.5\textwidth]{images/placeholder_image.png}
%            \caption{Image caption}
%            \label{fig:figure1}
%        \end{figure}
%        
%    \end{columns}
\end{frame}


\begin{frame}{CACTI (Cont.)}
	\textcolor{green}{Advantages:}
	\begin{enumerate}
		\item Open source
		\item To be general
		\item High speed
		\item High flexibility in personalization
	\end{enumerate}
	
	\textcolor{red}{Disadvantages:}
	\begin{enumerate}
		\item Approximate calculations
		\item Productivity gap
		\item Not real time
		\item It doesn't have a strong community
	\end{enumerate}
	
\end{frame}



\begin{frame}{CACTI (Cont.)}
	
\textbf{How install and compile CACTI?}\\

In first we should install dependencies.
	
\begin{block}{Install dependencies}
	\texttt{\textcolor{blue}{\$} sudo apt-get update}\\
	\texttt{\textcolor{blue}{\$} sudo apt-get install build-essential}
\end{block}

After install dependencies we should clone repository.

\begin{block}{Clone repository}
	\texttt{\textcolor{blue}{\$} git clone https://github.com/HewlettPackard/cacti.git}
\end{block}
	
	
%    \lstinputlisting[language=Python, label=samplecode, caption=Example of code, % firstline=1, lastline=10
%    ]{code.py}
\end{frame}


\begin{frame}{CACTI (Cont.)}
	
	Now we build CACTI:
	
	\begin{block}{Build}
		\texttt{\textcolor{blue}{\$} cd CACTI}\\
		\texttt{\textcolor{blue}{\$} make}\\
	\end{block}
	
	After the build is completed, you will see an output like Figure \textcolor{blue}{\ref{fig:Successful build}}
	
	\begin{figure}
		\centering
		\includegraphics[height=3.5cm]{images/img3}
			\caption{Successful build}
		\label{fig:Successful build}
	\end{figure}
	
	
	%    \lstinputlisting[language=Python, label=samplecode, caption=Example of code, % firstline=1, lastline=10
	%    ]{code.py}
\end{frame}


\begin{frame}{CACTI (Cont.)}
	
	You can set cache configs in \texttt{cache.cfg} file like figure 

	
	\begin{figure}
		\centering
		\includegraphics[height=6cm]{images/img4}
		\caption{cache config file}
		\label{fig:cache config file}
	\end{figure}
	
\end{frame}


\begin{frame}{CACTI (Cont.)}
	
	Run simulation with this command:
	
	\begin{block}{Ù‹Run}
		\texttt{\textcolor{blue}{\$} ./cacti -infile cache.cfg}\\
	\end{block}
	
	The simulation output is as follows:
	
	\begin{figure}
		\centering
		\includegraphics[height=4cm]{images/img5}
		\caption{Output report}
		\label{fig:Output report}
	\end{figure}
	
\end{frame}







%\begin{frame}{Table frame example}
%
%\begin{table}
%    \begin{tabular}{c|cc}
%        \textbf{Col1} & Col2 & Col3 \\
%        \hline
%        1            & ...                    & ...             \\
%        2            & ...                    & ...             \\
%        3            & ...                    & ...             \\
%    \end{tabular}
%    \caption{Table name}
%    \label{tab:table1}
%\end{table}
%
%\end{frame}

% --------- SECTION 3 ------- %
\section{NVSIM}

\begin{frame}{NVSIM}
	\begin{enumerate}
		\item NVSIM simulator is a tool for analyzing and simulating non-volatile memories
		\item It is primarily used for analyzing and estimating the area, power, and energy consumed
		\item Unlike CACTI simulator, NVSIM simulator supports the simulation and analysis of new emerging memories like:
		\begin{enumerate}
			\item PCM (Phase Change Memory)
			\item STT RAM (Spin Torque Transfer RAM)	
			\item ReRAM (Resistive RAM)
			\item FBDRAM (Floating Body Dynamic RAM)
			\item eDRAM	
		\end{enumerate}
		\item Developed with C++
	\end{enumerate}
\end{frame}


\begin{frame}{NVSIM (Cont.)}
	
	\begin{figure}
		\centering
		\includegraphics[height=4cm]{images/img10}
		\caption{Memory hierarchy in NVSIM}
		\label{fig:Memory hierarchy in NVSIM}
	\end{figure}

\end{frame}



\begin{frame}{NVSIM (Cont.)}
	\textcolor{green}{Advantages:}
	\begin{enumerate}
		\item Open source
		\item Support for the simulation of emerging memories
		\item low level Changeability and personalization
	\end{enumerate}
	
	\textcolor{red}{Disadvantages:}
	\begin{enumerate}
		\item Not real time
		\item There is no official version (In this talk i use modified version of simulator)
	\end{enumerate}
\end{frame}



\begin{frame}{NVSIM (Cont.)}
	\textbf{How install and compile CACTI?}\\
	
	In first clone repository: 
	\begin{block}{clone repository}
		\texttt{\textcolor{blue}{\$} git clone https://github.com/lpentecost/nvsim-merged} \\
	\end{block}
	go to repository directory and make it: 
	\begin{block}{build}
		\texttt{\textcolor{blue}{\$} cd nvsim-merged} \\
			\texttt{\textcolor{blue}{\$} make} \\
	\end{block}
\end{frame}



\begin{frame}{NVSIM (Cont.)}
	If the build is successful, your terminal output will look like this:
	
	\begin{figure}
		\centering
		\includegraphics[height=5cm]{images/img6}
		\caption{NVSIM successful build}
		\label{fig:NVSIM successful build}
	\end{figure}
\end{frame}





\begin{frame}{NVSIM (Cont.)}
	Now we should set the config file like CACTI in \texttt{.cfg} file. for simulate simple design we use \texttt{samole.cfg} which the config of a 64 bit memristor.
	
	\begin{figure}
		\centering
		\includegraphics[height=5cm]{images/img7}
		\caption{\texttt{sample.cfg} config file}
		\label{fig:sample.cfg config file1}
	\end{figure}
\end{frame}



\begin{frame}{NVSIM (Cont.)}
	\textbf{Run simulation: }
	
	\begin{block}{Run}
		\texttt{\textcolor{blue}{\$} ./nvsim sample.cfg} \\
	\end{block}
	
	output as follow:
	
	\begin{figure}
		\centering
		\includegraphics[height=4cm]{images/img8}
		\caption{Output of simulation}
		\label{fig:Output of simulation}
	\end{figure}
	
\end{frame}





% --------- SECTION 4 ------- %
\section{DRAMSIM}

\begin{frame}{DRAMSIM}
	\begin{enumerate}
		\item DRAMSim use for simulate Dynamic RAMs.
		\begin{enumerate}
			\item DRAM modeling it's very important because the technology is trying to provide CPU and DRAM integrated in one chip.
			\item This provides high density:
			\begin{enumerate}
				\item High density
				\item Optimal performance
				\item Lower power consumption
			\end{enumerate}
		\end{enumerate}
		\item DRAMSim is provide in three version:
		\begin{enumerate}
			\item DRAMSim 1
			\item DRAMSim 2
			\item DRANSim 3\\
			\textbf{In this talk, we discuss about the last version of DRAMSim}
		\end{enumerate}
		\item DRAMSim developed in C++ and write in modularly.
	\end{enumerate}
\end{frame}





\begin{frame}{DRAMSIM (Cont.)}
	\begin{enumerate}
		\item DRAMSim can be connected to GEM5
		\item DRAMSim can simulate following protocol:
		\begin{enumerate}
			\item DDR3
			\item DDR4
			\item â€«â€ªLPDDR3â€¬â€¬
			\item â€«â€ªLPDDR4â€¬â€¬
			\item â€«â€ªGDDR5â€¬â€¬
			\item â€«â€ªGDDR6â€¬â€¬
			\item HBM
			\item HMC
			\item â€«â€ªSTT-MRAMâ€¬â€¬
		\end{enumerate}
	\end{enumerate}
	
	The structure of main block of DRAMSim is shown in figure \ref{fig:Main block of DRAMSim}.
\end{frame}



\begin{frame}{DRAMSIM (Cont.)}
	\begin{figure}
		\centering
		\includegraphics[height=6cm]{images/img11}
		\caption{Main block of DRAMSim}
		\label{fig:Main block of DRAMSim}
	\end{figure}
\end{frame}




\begin{frame}{DRAMSIM (Cont.)}
	\textcolor{green}{Advantages:}
	\begin{enumerate}
		\item The possibility of simulating new DRAM technologies like DDR4 and GDDR6
		\item High flexibility in configuration
		\item Synchronize with system simulators
	\end{enumerate}
	
	\textcolor{red}{Disadvantages:}
	\begin{enumerate}
		\item Dependence on the model and configuration
		\item Don't report power consumption and area
	\end{enumerate}
\end{frame}







\begin{frame}{DRAMSIM (Cont.)}
	\textbf{How install and build DRAMSim?}\\
	We should clone repository in first step:
	\begin{block}{Clone repository}
		\texttt{\textcolor{blue}{\$} git clone â€«â€ªhttps://github.com/umd-memsys/DRAMsim3â€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} â€«â€ªDRAMsim3â€¬â€¬â€«â€ªcdâ€¬â€¬} \\
	\end{block}
	
	now we should build it:
	\begin{block}{Build}
		\texttt{\textcolor{blue}{\$} mkdir buildâ€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} â€«â€ªcd buildâ€¬â€¬â€«â€ªcdâ€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} â€«â€ªcmake ..â€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} â€«â€ªmake -j4â€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} â€«â€ªâ€«â€ª-DTHERMAL=1â€¬â€¬â€«â€ª..â€¬â€¬ â€«â€ªcmakeâ€¬â€¬â€¬â€¬} \\
	\end{block}
\end{frame}




\begin{frame}{DRAMSIM (Cont.)}
	If the simulation builds successfully, you can see \textbf{Built target} on your terminal like figure \ref{fig:DRAMSim built target}
	
	\begin{figure}
		\centering
		\includegraphics[height=5cm]{images/img12}
		\caption{DRAMSim built target}
		\label{fig:DRAMSim built target}
	\end{figure}
\end{frame}


\begin{frame}{DRAMSIM (Cont.)}
	\textbf{How can run sample simulation?}\\
	\begin{enumerate}
		\item in first, create a folder for save output file of simulation:
		\begin{block}{Create output directory}
			\texttt{\textcolor{blue}{\$} â€«â€ªâ€¬â€¬â€«â€ªmkdir outputâ€¬â€¬â€¬â€¬} \\
		\end{block}
		
		\item then, with this command, run simulation for \texttt{sample\_trace.txt} config file:
		\begin{block}{Run simulation}
			\texttt{\textcolor{blue}{\$} â€«â€ª./build/dramsim3mainâ€¬â€¬ â€«â€ªconfigs/DDR4\_8Gb\_x8\_3200.ini -câ€¬â€¬â€¬â€¬â€¬â€¬ 100000 -t tests/â€«â€ªexample\_trace.txtâ€¬â€¬ -o output/} \\
		\end{block}		
	\end{enumerate}
	every various configurations files, located in \texttt{configs/} directory. for this simulation we use \texttt{DDR4\_8Gb} config file.
\end{frame}


\begin{frame}{DRAMSIM (Cont.)}
	after simulation is finished, you can see output in \texttt{output/} directory in \texttt{dramsim3.txt} file like bellow:
	\begin{figure}
		\centering
		\includegraphics[height=5cm]{images/img12_2}
		\caption{Output report}
		\label{fig:Output report of DRAMSim}
	\end{figure}
\end{frame}



\begin{frame}{DRAMSIM (Cont.)}
	we can plot read latancy, interarrival latancy, write latancy and ... with some python scripts located in \texttt{script/} directory.
	
	\begin{block}{plot}
		\texttt{\textcolor{blue}{\$} python3 scripts/plot\_stats.py output/dramsim3.jsonâ€¬â€¬} \\
	\end{block}
	
	the output of simulation:	
\end{frame}




\begin{frame}{DRAMSIM (Cont.)}
	\begin{figure}
		\centering
		\includegraphics[height=6cm]{images/img13}
		\caption{Interarrival latancy}
		\label{fig:Interarrival latancy}
	\end{figure}	
\end{frame}



\begin{frame}{DRAMSIM (Cont.)}
	\begin{figure}
		\centering
		\includegraphics[height=6cm]{images/img14}
		\caption{Read latancy}
		\label{fig:Read latancy}
	\end{figure}	
\end{frame}


\begin{frame}{DRAMSIM (Cont.)}
	\begin{figure}
		\centering
		\includegraphics[height=6cm]{images/img15}
		\caption{Write latancy}
		\label{fig:Write latancy}
	\end{figure}	
\end{frame}











% --------- SECTION 4 ------- %
\section{SimpleScaler}

\begin{frame}{SimpleScaler}
	\begin{enumerate}
		\item This simulator was the doctoral thesis of Mr. Austin Todd from University of Wisconsin, which was written in C language
		
		\item This simulator is not just for memories. like Gem5, it is a system simulator.
		
		\item By default, this simulator is capable of simulating Alpha and PISA ISA. but other ISAs can also be added to it. 
		
		\item With SimpleScaler we can simulate this Micro Architecture:
		\begin{enumerate}
			\item \textbf{Sim-fast:} simulate without considering cache, pipeline and any type of micro architecture
			\item \textbf{Sim-safe:} simulate with considering access to memories
			\item \textbf{Sim-profile:} report number of simulations and dynamic instructions
			\item \textbf{Sim-cache:} simulate a system with access to cache
			\item \textbf{Sim-bpred:} report total branch prediction of program
			\item \textbf{Sim-outorder: }All the previous features are collected in this
		\end{enumerate}
	\end{enumerate}
\end{frame}



\begin{frame}{SimpleScaler (Cont.)}
	The structure of SimpleScaler is shown in bellow:
	
	\begin{figure}
		\centering
		\includegraphics[height=5cm]{images/img16}
		\caption{Structure of SimpleScaler}
		\label{fig:Structure of SimpleScaler}
	\end{figure}	
\end{frame}



\begin{frame}{SimpleScaler (Cont.)}
	\textcolor{green}{Advantages:}
	\begin{enumerate}
		\item Open source
		\item System level computer with more detail
		\item Support for different architectures
	\end{enumerate}
	
	\textcolor{red}{Disadvantages:}
	\begin{enumerate}
		\item No direct access to memory
		\item Not support a new memory technologies
		\item Don't report analysis with detail like \texttt{stats} file in GEM5
	\end{enumerate}
	
\end{frame}





\begin{frame}{SimpleScaler (Cont.)}
	\textbf{How install and build SimpleScaler?}\\
	We should clone repository in first step:
	\begin{block}{Clone repository}
		\texttt{\textcolor{blue}{\$} git clone â€«â€ªhttps://github.com/stevekuznetsov/simple-scalar.gitâ€¬â€¬â€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} â€«â€ªâ€«â€ªsimple-scalarâ€¬â€¬} \\
	\end{block}
	
	before build, we need install dependencies:
	\begin{block}{Install dependencies}
		\texttt{\textcolor{blue}{\$} sudo apt-get updateâ€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} sudo apt-get update install build-â€«â€ªessentialâ€¬â€¬â€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} â€«â€ªsudo apt-get update install flex bisonâ€¬â€¬} \\
		\texttt{\textcolor{blue}{\$} â€«â€ªsudo apt-get update install libx11-devâ€¬â€¬} \\
	\end{block}
\end{frame}




\begin{frame}{SimpleScaler (Cont.)}
	Now we can build simulator:
	\begin{block}{Build}
		\texttt{\textcolor{blue}{\$} make config-alphaâ€¬â€¬â€¬â€¬} \\
	\end{block}
	If the build is successful, your terminal output will look like this:
	
	\begin{figure}
		\centering
		\includegraphics[height=4cm]{images/img17}
		\caption{Build successful}
		\label{fig:Build successful}
	\end{figure}
\end{frame}




\begin{frame}{SimpleScaler (Cont.)}
	\textbf{Run simulation:}\\
	The default program's \texttt{.exe} file is located in the \texttt{tests/bin/} path. also the source code of program located in \texttt{tests/src/} directory.\\
	
	in this simulation we use \texttt{test-math} program. this program calculates sine, tangent and several other mathematical operations for various inputs.
	
	Run simulation with this command:
	\begin{block}{Build}
		\texttt{\textcolor{blue}{\$} ./sim-safe tests/bin/test-math} \\
	\end{block}
\end{frame}



\begin{frame}{SimpleScaler (Cont.)}
	The output report of simulation as bellow:
	
	\begin{figure}
		\centering
		\includegraphics[height=5cm]{images/img18}
		\caption{Report of \texttt{test-math} program}
		\label{fig:Report of test-math program}
	\end{figure}
	
\end{frame}


%
%
%
%
%
%
%
%
%% --------- SECTION 4 ------- %
%\section{DRAMSIM}
%
%\begin{frame}{DRAMSIM}
%	
%	 \begin{enumerate}
%	 	\item modeling and simulation of DRAM is important because the technology tries to provide an integrated DRAM and CPU.
%	 	
%	 	\item DRAMSIM write in C++ and developed in modular based. This makes it possible to develop the Simulator and connect with other CPU Simulator like JEM5 easily.
%	 	
%	 \end{enumerate}
%
%\end{frame}
%
%
%
%
%
%
%
%
%
%
%
%
%
%
% --------- SECTION 4 ------- %
\section{References}

\begin{frame}{References}

\hyperlink{start}{\beamerreturnbutton{Back to start}}

\nocite{bibitem1}
\nocite{*}
\bibliographystyle{IEEEtran} 
\bibliography{ref}

\end{frame}






\begin{frame}[plain]
	\begin{center}
		{\Huge The End}
		
		\bigskip\bigskip % Vertical whitespace
		
		{\LARGE Questions? Comments?}\\
		You can find this slides here:\\
		\textcolor{red}{\href{https://github.com/M-Sc-AUT/M.Sc-Computer-Architecture/tree/main/Memory Technologies}{\texttt{github.com/M-Sc-AUT/M.Sc-Computer-Architecture/Memory Technologies}}}
	\end{center}
\end{frame}




\end{document}
